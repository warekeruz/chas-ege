//РАБОТАЕТ
//32. Задание 4 № 320183
//Перед началом футбольного матча судья бросает монетку, чтобы определить,
//какая из команд начнёт игру с мячом. Команда «Физик» играет три матча
//с разными командами. Найдите вероятность того, что в этих играх
//«Физик» выиграет жребий ровно два раза.

(function () {
    'use strict';
    NAinfo.requireApiVersion(0, 0);

    const sport = ['футбольного', 'волейбольного', 'баскетбольного', 'хоккейного', 'теннисного', 'бейсбольного'].iz();
    const team_name = ['Физик', 'Химик', 'Сапфир', 'Труд', 'Геолог', 'Биолог', 'Квант', 'Изумруд', 'Рубин', 'Факел'].iz();
    const vopr = ['начнёт игру с мячом', 'выиграет жребий'].iz();
    
    let kolvo_rush = sl(0, 3) + 2; // число сыгранных игр   0-2 игры 1-3 игры 2-4 игры 3-5 игр
    const games = ['два матча', 'три матча', 'четыре матча', 'пять матчей'][kolvo_rush - 2];
    const first_times = sl(1, kolvo_rush); // число выигранных жребиев
    let rovno_ili_bol = sluchch(0, 1); // ровно %количество побед% = 0, больше = 1

    if (kolvo_rush === first_times) {
        rovno_ili_bol = 0;
    }

    const kolvoOptions = [
        ['ровно один раз', 'ровно два раза', 'ровно три раза', 'ровно четыре раза', 'ровно пять раз'],
        ['болeе одного раза', 'болeе двух раз', 'болeе трёх раз', 'болeе четырёх раз', 'болeе пяти раз']
    ];

    const probabilityMatrix = {
        2: [[0.5, 0.25], [0.25, 0]],
        3: [[0.375, 0.375, 0.125], [0.5, 0.125, 0]],
        4: [[0.25, 0.375, 0.25, 0.0625], [0.6875, 0.3125, 0.0625, 0]],
        5: [[0.15625, 0.3125, 0.3125, 0.15625, 0.03125], [0.8125, 0.5, 0.1875, 0.03125, 0]]
    };

    const kolvo = kolvoOptions[rovno_ili_bol][first_times - 1];
    const answers = probabilityMatrix[kolvo_rush][rovno_ili_bol][first_times - 1];

    NAtask.setTask({
        text: `Перед началом ${sport} матча судья бросает монетку, чтобы определить, какая из команд начнёт игру с мячом. Команда «${team_name}» играет ${games} с разными командами. Найдите вероятность того, что в этих играх «${team_name}» ${vopr} ${kolvo}.`,
        answers
    });
})();
